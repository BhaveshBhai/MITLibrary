@using MITLibraryTextBookManagementSystem.Models;
@model MITLibraryTextBookManagementSystem.Models.TextBookViewModel

@{
    ViewBag.Title = "Index";
}

@*<script src="~/Scripts/jquery-3.4.1.js"></script>*@
<script src="~/Content/DataTables/JS/jquery-3.5.1.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
@*<link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />*@
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
@*<script src="~/Scripts/DataTables/dataTables.bootstrap4.min.js"></script>*@
<link href="~/Content/DataTables/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
@*<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />*@
@*<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />*@
<link href="~/Content/DataTables/css/fixedHeader.bootstrap4.min.css" rel="stylesheet" />
@*<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>*@
<script src="~/Scripts/DataTables/jquery.dataTables.min.js"></script>
@*<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>*@
<script src="~/Scripts/DataTables/dataTables.bootstrap4.min.js"></script>
<script src="~/Scripts/DataTables/dataTables.fixedHeader.min.js"></script>

@using (Html.BeginForm("Index", "FileUpload", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div class="form-group">
        <label for="year" class="col-sm-2 control-label">Select Year</label>
        <div class="col-sm-10">
            @Html.DropDownListFor(m => m.yearId, Model.Year, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        <label for="Semester" class="col-sm-2 control-label">Select Semester</label>
        <div class="col-sm-10">
            @Html.DropDownListFor(m => m.semesterId, Model.Semester, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        <label for="Campus" class="col-sm-2 control-label">Select Campus</label>
        <div class="col-sm-10">
            @Html.DropDownListFor(m => m.campusId, Model.Campus, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        <label for="file" col-sm-2 control-label>File input</label>
        <div class="col-sm-10">
            @Html.TextBoxFor(m => m.File, "", new { @type = "file" }) <br />
        </div>

        @*<p class="help-block">tblTextBox block-level help text here.</p>*@
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default">Preview</button>
        </div>
    </div>
}

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @if (Model.ImportTextBooks != null)
                {
                    <table id="tblTextBox" class="table table-striped table-bordered" style="width:100%">
                        <thead>
                            <tr>
                                <th>UnitCode</th>
                                <th>Coordinator</th>
                                <th>Author</th>
                                <th>Year</th>
                                <th>Title</th>
                                <th>Publisher</th>
                                <th>Identifier</th>
                                <th>Requirement</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (ImportTextBook customer in Model.ImportTextBooks)
                            {
                                <tr>
                                    <td>@customer.UnitCode</td>
                                    <td>@customer.Coordinator</td>
                                    <td>@customer.Author</td>
                                    <td>@customer.Year</td>
                                    <td>@customer.Title</td>
                                    <td>@customer.Publisher</td>
                                    <td>@customer.Identifier</td>
                                    <td>@customer.Requirement</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>



<script>
    $(document).ready(function () {
        @if(Model.ImportTextBooks != null)
        {
            @:$("#exampleModal").modal('show');
        }
            else
            {
                @:$("#exampleModal").modal('hide');
            }
        var table = $('#tblTextBox').DataTable({
            fixedHeader: true
        });
    });

</script>